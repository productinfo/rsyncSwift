\hypertarget{stream_8c}{}\section{/\+Users/\+Zheng/\+Desktop/librsync-\/0.9.7/stream.c File Reference}
\label{stream_8c}\index{/\+Users/\+Zheng/\+Desktop/librsync-\/0.\+9.\+7/stream.\+c@{/\+Users/\+Zheng/\+Desktop/librsync-\/0.\+9.\+7/stream.\+c}}
{\ttfamily \#include $<$config.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include \char`\"{}librsync.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stream.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}util.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}trace.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{stream_8c_a392863996f0186170daf5b50ab22099b}{rs\+\_\+buffers\+\_\+copy} (\hyperlink{librsync_8h_abf9f543dbfe5c1e60c8ed1c93d087767}{rs\+\_\+buffers\+\_\+t} $\ast$stream, int max\+\_\+len)
\begin{DoxyCompactList}\small\item\em Copy up to {\ttfamily max\+\_\+len} bytes from input of {\bfseries stream} to its output. \end{DoxyCompactList}\item 
void \hyperlink{stream_8c_a731cde76aa43140e9d8b04675a2ab99a}{rs\+\_\+buffers\+\_\+check\+\_\+exit} (\hyperlink{librsync_8h_abf9f543dbfe5c1e60c8ed1c93d087767}{rs\+\_\+buffers\+\_\+t} const $\ast$stream)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{stream_8c_a731cde76aa43140e9d8b04675a2ab99a}{}\index{stream.\+c@{stream.\+c}!rs\+\_\+buffers\+\_\+check\+\_\+exit@{rs\+\_\+buffers\+\_\+check\+\_\+exit}}
\index{rs\+\_\+buffers\+\_\+check\+\_\+exit@{rs\+\_\+buffers\+\_\+check\+\_\+exit}!stream.\+c@{stream.\+c}}
\subsubsection[{rs\+\_\+buffers\+\_\+check\+\_\+exit(rs\+\_\+buffers\+\_\+t const $\ast$stream)}]{\setlength{\rightskip}{0pt plus 5cm}void rs\+\_\+buffers\+\_\+check\+\_\+exit (
\begin{DoxyParamCaption}
\item[{{\bf rs\+\_\+buffers\+\_\+t} const $\ast$}]{stream}
\end{DoxyParamCaption}
)}\label{stream_8c_a731cde76aa43140e9d8b04675a2ab99a}
Whenever a stream processing function exits, it should have done so because it has either consumed all the input or has filled the output buffer. This function checks that simple postcondition. 

Definition at line 152 of file stream.\+c.

\hypertarget{stream_8c_a392863996f0186170daf5b50ab22099b}{}\index{stream.\+c@{stream.\+c}!rs\+\_\+buffers\+\_\+copy@{rs\+\_\+buffers\+\_\+copy}}
\index{rs\+\_\+buffers\+\_\+copy@{rs\+\_\+buffers\+\_\+copy}!stream.\+c@{stream.\+c}}
\subsubsection[{rs\+\_\+buffers\+\_\+copy(rs\+\_\+buffers\+\_\+t $\ast$stream, int max\+\_\+len)}]{\setlength{\rightskip}{0pt plus 5cm}int rs\+\_\+buffers\+\_\+copy (
\begin{DoxyParamCaption}
\item[{{\bf rs\+\_\+buffers\+\_\+t} $\ast$}]{stream, }
\item[{int}]{max\+\_\+len}
\end{DoxyParamCaption}
)}\label{stream_8c_a392863996f0186170daf5b50ab22099b}


Copy up to {\ttfamily max\+\_\+len} bytes from input of {\bfseries stream} to its output. 

Return the number of bytes actually copied, which may be less than L\+E\+N if there is not enough space in one or the other stream.

This always does the copy immediately. Most functions should call \hyperlink{stream_8h_a1bfd11ae022f238f934aa2245d9b51d2}{rs\+\_\+tube\+\_\+copy()} to cause the copy to happen gradually as space becomes available. 

Definition at line 112 of file stream.\+c.

