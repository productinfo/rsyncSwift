\hypertarget{patch_8c}{}\section{/\+Users/\+Zheng/\+Desktop/librsync-\/0.9.7/patch.c File Reference}
\label{patch_8c}\index{/\+Users/\+Zheng/\+Desktop/librsync-\/0.\+9.\+7/patch.\+c@{/\+Users/\+Zheng/\+Desktop/librsync-\/0.\+9.\+7/patch.\+c}}
{\ttfamily \#include $<$config.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include \char`\"{}librsync.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}util.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}trace.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}protocol.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}netint.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}command.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sumset.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}prototab.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stream.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}job.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{librsync_8h_a99e68494fe0ac6b84f4ecfb646690c35}{rs\+\_\+job\+\_\+t} $\ast$ \hyperlink{patch_8c_aca51f53fcd779e06be770b994f73193c}{rs\+\_\+patch\+\_\+begin} (\hyperlink{librsync_8h_afc4bc64a627d7ca181a7e813832313cc}{rs\+\_\+copy\+\_\+cb} $\ast$copy\+\_\+cb, void $\ast$copy\+\_\+arg)
\begin{DoxyCompactList}\small\item\em Apply a gloss\+\_\+delta to a gloss\+\_\+basis to recreate the new file. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{patch_8c_aca51f53fcd779e06be770b994f73193c}{}\index{patch.\+c@{patch.\+c}!rs\+\_\+patch\+\_\+begin@{rs\+\_\+patch\+\_\+begin}}
\index{rs\+\_\+patch\+\_\+begin@{rs\+\_\+patch\+\_\+begin}!patch.\+c@{patch.\+c}}
\subsubsection[{rs\+\_\+patch\+\_\+begin(rs\+\_\+copy\+\_\+cb $\ast$copy\+\_\+cb, void $\ast$copy\+\_\+arg)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rs\+\_\+job\+\_\+t}$\ast$ rs\+\_\+patch\+\_\+begin (
\begin{DoxyParamCaption}
\item[{{\bf rs\+\_\+copy\+\_\+cb} $\ast$}]{copy\+\_\+cb, }
\item[{void $\ast$}]{copy\+\_\+arg}
\end{DoxyParamCaption}
)}\label{patch_8c_aca51f53fcd779e06be770b994f73193c}


Apply a gloss\+\_\+delta to a gloss\+\_\+basis to recreate the new file. 

This gives you back a \hyperlink{librsync_8h_a99e68494fe0ac6b84f4ecfb646690c35}{rs\+\_\+job\+\_\+t} object, which can be cranked by calling \hyperlink{job_8c_a637e42431bf4df09af378c5a1efa60f0}{rs\+\_\+job\+\_\+iter()} and updating the stream pointers. When finished, call rs\+\_\+job\+\_\+finish() to dispose of it.


\begin{DoxyParams}{Parameters}
{\em stream} & Contains pointers to input and output buffers, to be adjusted by caller on each iteration.\\
\hline
{\em copy\+\_\+cb} & Callback used to retrieve content from the basis file.\\
\hline
{\em copy\+\_\+arg} & Opaque environment pointer passed through to the callback.\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000002}{Todo}]As output is produced, accumulate the M\+D4 checksum of the output. Then if we find a C\+H\+E\+C\+K\+S\+U\+M command we can check it\textquotesingle{}s contents against the output.\end{DoxyRefDesc}


\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]Implement C\+O\+P\+Y commands.\end{DoxyRefDesc}


\begin{DoxySeeAlso}{See also}
\hyperlink{librsync_8h_a3aee8c9ccec7d042d3d8b587cd147f5d}{rs\+\_\+patch\+\_\+file()} 
\end{DoxySeeAlso}


Definition at line 313 of file patch.\+c.

