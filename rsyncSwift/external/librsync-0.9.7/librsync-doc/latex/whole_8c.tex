\hypertarget{whole_8c}{}\section{/\+Users/\+Zheng/\+Desktop/librsync-\/0.9.7/whole.c File Reference}
\label{whole_8c}\index{/\+Users/\+Zheng/\+Desktop/librsync-\/0.\+9.\+7/whole.\+c@{/\+Users/\+Zheng/\+Desktop/librsync-\/0.\+9.\+7/whole.\+c}}
{\ttfamily \#include $<$config.\+h$>$}\\*
{\ttfamily \#include $<$assert.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$unistd.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$errno.\+h$>$}\\*
{\ttfamily \#include \char`\"{}librsync.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}trace.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}fileutil.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sumset.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}job.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}buf.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}whole.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}util.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{librsync_8h_a7feb858ceba3b8f3cf048d49be108253}{rs\+\_\+result} \hyperlink{whole_8c_a557e2e75c34d1b2dac8450a8e4e8ebef}{rs\+\_\+whole\+\_\+run} (\hyperlink{librsync_8h_a99e68494fe0ac6b84f4ecfb646690c35}{rs\+\_\+job\+\_\+t} $\ast$job, F\+I\+L\+E $\ast$in\+\_\+file, F\+I\+L\+E $\ast$out\+\_\+file)
\item 
\hyperlink{librsync_8h_a7feb858ceba3b8f3cf048d49be108253}{rs\+\_\+result} \hyperlink{whole_8c_a195e616cd8655253a8bdd221a3344683}{rs\+\_\+sig\+\_\+file} (F\+I\+L\+E $\ast$old\+\_\+file, F\+I\+L\+E $\ast$sig\+\_\+file, size\+\_\+t new\+\_\+block\+\_\+len, size\+\_\+t strong\+\_\+len, \hyperlink{librsync_8h_a03dc177b86ff104157b5410afd12de5b}{rs\+\_\+stats\+\_\+t} $\ast$stats)
\item 
\hyperlink{librsync_8h_a7feb858ceba3b8f3cf048d49be108253}{rs\+\_\+result} \hyperlink{whole_8c_a9a35c05d9aa1da7839c800e7e0e52a65}{rs\+\_\+loadsig\+\_\+file} (F\+I\+L\+E $\ast$sig\+\_\+file, \hyperlink{librsync_8h_afb2a9cb505daeb8e519d06686f5caabf}{rs\+\_\+signature\+\_\+t} $\ast$$\ast$sumset, \hyperlink{librsync_8h_a03dc177b86ff104157b5410afd12de5b}{rs\+\_\+stats\+\_\+t} $\ast$stats)
\item 
\hyperlink{librsync_8h_a7feb858ceba3b8f3cf048d49be108253}{rs\+\_\+result} \hyperlink{whole_8c_a85a3d6a8ef9c859f21553b55223042c9}{rs\+\_\+delta\+\_\+file} (\hyperlink{librsync_8h_afb2a9cb505daeb8e519d06686f5caabf}{rs\+\_\+signature\+\_\+t} $\ast$sig, F\+I\+L\+E $\ast$new\+\_\+file, F\+I\+L\+E $\ast$delta\+\_\+file, \hyperlink{librsync_8h_a03dc177b86ff104157b5410afd12de5b}{rs\+\_\+stats\+\_\+t} $\ast$stats)
\item 
\hyperlink{librsync_8h_a7feb858ceba3b8f3cf048d49be108253}{rs\+\_\+result} \hyperlink{whole_8c_a5d616c9c4b2331a0b25dd5d4ca798895}{rs\+\_\+patch\+\_\+file} (F\+I\+L\+E $\ast$basis\+\_\+file, F\+I\+L\+E $\ast$delta\+\_\+file, F\+I\+L\+E $\ast$new\+\_\+file, \hyperlink{librsync_8h_a03dc177b86ff104157b5410afd12de5b}{rs\+\_\+stats\+\_\+t} $\ast$stats)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{whole_8c_a85a3d6a8ef9c859f21553b55223042c9}{}\index{whole.\+c@{whole.\+c}!rs\+\_\+delta\+\_\+file@{rs\+\_\+delta\+\_\+file}}
\index{rs\+\_\+delta\+\_\+file@{rs\+\_\+delta\+\_\+file}!whole.\+c@{whole.\+c}}
\subsubsection[{rs\+\_\+delta\+\_\+file(rs\+\_\+signature\+\_\+t $\ast$sig, F\+I\+L\+E $\ast$new\+\_\+file, F\+I\+L\+E $\ast$delta\+\_\+file, rs\+\_\+stats\+\_\+t $\ast$stats)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rs\+\_\+result} rs\+\_\+delta\+\_\+file (
\begin{DoxyParamCaption}
\item[{{\bf rs\+\_\+signature\+\_\+t} $\ast$}]{sig, }
\item[{F\+I\+L\+E $\ast$}]{new\+\_\+file, }
\item[{F\+I\+L\+E $\ast$}]{delta\+\_\+file, }
\item[{{\bf rs\+\_\+stats\+\_\+t} $\ast$}]{stats}
\end{DoxyParamCaption}
)}\label{whole_8c_a85a3d6a8ef9c859f21553b55223042c9}


Definition at line 146 of file whole.\+c.

\hypertarget{whole_8c_a9a35c05d9aa1da7839c800e7e0e52a65}{}\index{whole.\+c@{whole.\+c}!rs\+\_\+loadsig\+\_\+file@{rs\+\_\+loadsig\+\_\+file}}
\index{rs\+\_\+loadsig\+\_\+file@{rs\+\_\+loadsig\+\_\+file}!whole.\+c@{whole.\+c}}
\subsubsection[{rs\+\_\+loadsig\+\_\+file(\+F\+I\+L\+E $\ast$sig\+\_\+file, rs\+\_\+signature\+\_\+t $\ast$$\ast$sumset, rs\+\_\+stats\+\_\+t $\ast$stats)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rs\+\_\+result} rs\+\_\+loadsig\+\_\+file (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{sig\+\_\+file, }
\item[{{\bf rs\+\_\+signature\+\_\+t} $\ast$$\ast$}]{sumset, }
\item[{{\bf rs\+\_\+stats\+\_\+t} $\ast$}]{stats}
\end{DoxyParamCaption}
)}\label{whole_8c_a9a35c05d9aa1da7839c800e7e0e52a65}
Load signatures from a signature file into memory. Return a pointer to the newly allocated structure in S\+U\+M\+S\+E\+T.

\begin{DoxySeeAlso}{See also}
rs\+\_\+readsig\+\_\+begin() 
\end{DoxySeeAlso}


Definition at line 129 of file whole.\+c.

\hypertarget{whole_8c_a5d616c9c4b2331a0b25dd5d4ca798895}{}\index{whole.\+c@{whole.\+c}!rs\+\_\+patch\+\_\+file@{rs\+\_\+patch\+\_\+file}}
\index{rs\+\_\+patch\+\_\+file@{rs\+\_\+patch\+\_\+file}!whole.\+c@{whole.\+c}}
\subsubsection[{rs\+\_\+patch\+\_\+file(\+F\+I\+L\+E $\ast$basis\+\_\+file, F\+I\+L\+E $\ast$delta\+\_\+file, F\+I\+L\+E $\ast$new\+\_\+file, rs\+\_\+stats\+\_\+t $\ast$stats)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rs\+\_\+result} rs\+\_\+patch\+\_\+file (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{basis\+\_\+file, }
\item[{F\+I\+L\+E $\ast$}]{delta\+\_\+file, }
\item[{F\+I\+L\+E $\ast$}]{new\+\_\+file, }
\item[{{\bf rs\+\_\+stats\+\_\+t} $\ast$}]{stats}
\end{DoxyParamCaption}
)}\label{whole_8c_a5d616c9c4b2331a0b25dd5d4ca798895}


Definition at line 166 of file whole.\+c.

\hypertarget{whole_8c_a195e616cd8655253a8bdd221a3344683}{}\index{whole.\+c@{whole.\+c}!rs\+\_\+sig\+\_\+file@{rs\+\_\+sig\+\_\+file}}
\index{rs\+\_\+sig\+\_\+file@{rs\+\_\+sig\+\_\+file}!whole.\+c@{whole.\+c}}
\subsubsection[{rs\+\_\+sig\+\_\+file(\+F\+I\+L\+E $\ast$old\+\_\+file, F\+I\+L\+E $\ast$sig\+\_\+file, size\+\_\+t new\+\_\+block\+\_\+len, size\+\_\+t strong\+\_\+len, rs\+\_\+stats\+\_\+t $\ast$stats)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rs\+\_\+result} rs\+\_\+sig\+\_\+file (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{old\+\_\+file, }
\item[{F\+I\+L\+E $\ast$}]{sig\+\_\+file, }
\item[{size\+\_\+t}]{new\+\_\+block\+\_\+len, }
\item[{size\+\_\+t}]{strong\+\_\+len, }
\item[{{\bf rs\+\_\+stats\+\_\+t} $\ast$}]{stats}
\end{DoxyParamCaption}
)}\label{whole_8c_a195e616cd8655253a8bdd221a3344683}
Generate the signature of a basis file, and write it out to another.


\begin{DoxyParams}{Parameters}
{\em new\+\_\+block\+\_\+len} & block size for signature generation, in bytes\\
\hline
{\em strong\+\_\+len} & truncated length of strong checksums, in bytes\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{librsync_8h_a220b2d586f1ed2b029b78a8ea4841e35}{rs\+\_\+sig\+\_\+begin()} 
\end{DoxySeeAlso}


Definition at line 106 of file whole.\+c.

\hypertarget{whole_8c_a557e2e75c34d1b2dac8450a8e4e8ebef}{}\index{whole.\+c@{whole.\+c}!rs\+\_\+whole\+\_\+run@{rs\+\_\+whole\+\_\+run}}
\index{rs\+\_\+whole\+\_\+run@{rs\+\_\+whole\+\_\+run}!whole.\+c@{whole.\+c}}
\subsubsection[{rs\+\_\+whole\+\_\+run(rs\+\_\+job\+\_\+t $\ast$job, F\+I\+L\+E $\ast$in\+\_\+file, F\+I\+L\+E $\ast$out\+\_\+file)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf rs\+\_\+result} rs\+\_\+whole\+\_\+run (
\begin{DoxyParamCaption}
\item[{{\bf rs\+\_\+job\+\_\+t} $\ast$}]{job, }
\item[{F\+I\+L\+E $\ast$}]{in\+\_\+file, }
\item[{F\+I\+L\+E $\ast$}]{out\+\_\+file}
\end{DoxyParamCaption}
)}\label{whole_8c_a557e2e75c34d1b2dac8450a8e4e8ebef}
Run a job continuously, with input to/from the two specified files. The job should already be set up, and must be free by the caller after return.

Buffers of \hyperlink{librsync_8h_a13d30eb003d6b9d3311435279879dd32}{rs\+\_\+inbuflen} and \hyperlink{librsync_8h_ade12a7fac722a79cf4c396cd2f7db6ff}{rs\+\_\+outbuflen} are allocated for temporary storage.


\begin{DoxyParams}{Parameters}
{\em in\+\_\+file} & Source of input bytes, or N\+U\+L\+L if the input buffer should not be filled.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
R\+S\+\_\+\+D\+O\+N\+E if the job completed, or otherwise an error result. 
\end{DoxyReturn}


Definition at line 68 of file whole.\+c.

